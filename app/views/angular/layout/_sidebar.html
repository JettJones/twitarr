<div id="login-modal-container" ng-include="'/layout/login.html'"></div>
<nav id="top-bar" role="navigation">
  <button type="button" class="menu-toggle" ng-click="menu_toggle()">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a href="/#/stream">
    <span class="menu-brand">
      Twit-arr
    </span>
  </a>
  <a ng-if="alerts" href="#alerts"> 
    <span class="menu-alerts glyphicon glyphicon-warning-sign" title="You have new alerts!"></span>
  </a>
  <div class="pull-right top-bar-search">
    <form>
      <div>
        <span class="glyphicon glyphicon-search"></span>
        <input ng-model="search" class='input top-bar-search-text' placeholder='Search...'>
        <button class="btn" style="margin: 5px 15px 5px 0px;" {{action 'search' text}}>Go</button>
      </div>
    </form>
  </div>
</nav>
<div id="side-menu">
  <div class="full-screen-overlay" ng-click="menu_toggle()" ></div>
  <div id="menu">
    <div id="login-info">
      <span ng-if="!user.loggedIn">Not logged in.</span>
      <span ng-if="user.loggedIn">{{ user.displayname }}</span>
    </div>
    <ul {{action 'menu_close'}}>
      <li ng-if="user.loggedIn"><a href="#seamail"><span class="glyphicon glyphicon-envelope"></span>Seamail</a></li>
      <li><a href="#forums"><span class="glyphicon glyphicon-list"></span>Forums</a></li>
      <li><a href="#stream"><span class="glyphicon glyphicon-bullhorn"></span>Tweets</a></li>
      <li>---</li>
      <li>
        <a href="#alerts">
          <!-- If this isn't lined up this way some whitespace creeps in -->
          <span ng-if="alerts" class="glyphicon glyphicon-warning-sign" style="color: #F62E51;"></span>
          <span ng-if="!alerts" class="glyphicon glyphicon-warning-sign"></span>Alerts
        </a>
      </li>
      <li><a href="#search"><span class="glyphicon glyphicon-search"></span>Search</a></li>
      <li>---</li>
      <li><a href="#help"><span class="glyphicon glyphicon-question-sign"></span>Help</a></li>
      <li>---</li>
      <li><a ng-click="show_login()" ng-if="!user.loggedIn">Login</a></li>
      <li><a href="/#/signup" ng-if="!user.loggedIn">Sign up</a></li>
      <li ng-if="user.loggedIn && user.isAdmin"><a href="#admin/users">User administration</a></li>
      <li ng-if="user.loggedIn && user.isAdmin"><a href="#admin/announcement">New announcement</a></li>
      <li ng-if="user.loggedIn && user.isAdmin">---</li>
      <li ng-if="user.loggedIn"><a href="#profile"><span class="glyphicon glyphicon-user"></span>Profile</a></li>
      <li ng-if="user.loggedIn"><a tabindex='-1' ng-click="logout(user)">Logout</a></li>
    </ul>
  </div>
</div>