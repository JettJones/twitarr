<!DOCTYPE html>
<html>
<head>
    <title>Twit-arr!</title>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <link rel='stylesheet' type='text/css' href='css/bootstrap.css'/>
    <link rel='stylesheet' type='text/css' href='css/bootstrap-responsive.css'/>
    <link rel='stylesheet' type='text/css' href='css/main.css'/>
</head>
<body>
<script type="text/x-handlebars" data-template-name="application">
    <div class='navbar'>
        <div class='navbar-inner'>
            <a class='brand hidden-phone'>Twit-arr!</a>
            <ul class='nav'>
                <li>{{#linkTo "announcements"}}Announcements{{/linkTo}}</li>
                <li>{{#linkTo "popular"}}Popular{{/linkTo}}</li>
                <li>{{#linkTo "mine"}}My Stuff{{/linkTo}}</li>
            </ul>
            <ul class='nav pull-right'>
                {{#unless logged_in}}
                <li>{{#linkTo "login"}}Login{{/linkTo}}</li>
                {{else}}
                <li class='dropdown'>
                    <a href='#' class='dropdown-toggle' data-toggle='dropdown'>
                        <span>{{ username }}</span>
                        <b class='caret'></b>
                    </a>
                    <ul class='dropdown-menu'>
                        <li>{{#linkTo "profile"}}Profile{{/linkTo}}</li>
                        <li><a tabindex='-1' href='#' {{ action 'logout' }}>Logout</a></li>
                    </ul>
                </li>
                {{/unless}}
            </ul>
        </div>
    </div>
    <div class='main'>
        {{ outlet }}
    </div>
    <div class="pull-right">
        <span class="visible-desktop">desktop</span>
        <span class="visible-tablet">tablet</span>
        <span class="visible-phone">phone</span>
    </div>
</script>
<script type="text/x-handlebars" data-template-name="announcements">
    <div id='announcements'>
        <h3>Announcements</h3>
        {{#each post in controller}}
            <div class='post-entry'>
                <span style="color: darkgray;">{{ post.username }}</span>
                <span class="pull-right" style="color: darkgray;" {{bindAttr data-livestamp="post.post_time"}} ></span>

                <div style="font-size: larger; font-weight: bold;">{{{ post.process_message }}}</div>

                {{#if is_admin}}
                <div class="clearfix">
                    <a href="#" class="pull-right" {{ action 'deleteAnnouncement' post.post_id }}>delete</a>
                </div>
                {{/if}}
            </div>
        {{else}}
            No announcements yet!
        {{/each}}
        {{#if is_admin}}
        {{view Ember.TextArea placeholder='Announce something!' valueBinding='newPost'}}
        <button {{ action 'createAnnouncement' }}>Post it</button>
        {{/if}}
    </div>
</script>
<script type="text/x-handlebars" data-template-name="popular">
    <h3>Popular</h3>
</script>
<script type="text/x-handlebars" data-template-name="search">
    <h3>Results for #{{ term }}</h3>
</script>
<script type="text/x-handlebars" data-template-name="posts">
    <h3>@{{ account}}</h3>
</script>
<script type="text/x-handlebars" data-template-name="mine">
    <h3>My Stuff</h3>
</script>
<script type="text/x-handlebars" data-template-name="profile">
    <h3>Profile</h3>
</script>
<script type="text/x-handlebars" data-template-name="login">
    <form class="form-horizontal">
        <legend>I have an account</legend>
        <div class="control-group">
            <label class="control-label">Username</label>

            <div class="controls">
                {{ view Ember.TextField placeholder='username' valueBinding='username'}}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Password</label>

            <div class="controls">
                {{ view Ember.TextField type='password' valueBinding='password'}}
            </div>
        </div>
        <div class="control-group controls">
            <button {{ action 'login' }}>Login</button>
        </div>
    </form>
    <form class="form-horizontal" style="margin-top: 20px;">
        <legend>I don't have an account yet!</legend>
        <div class="control-group">
            <label class="control-label">Username</label>

            <div class="controls">
                <input type='text' id='new-username'/>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Email</label>
            <div class="controls">
                <input type='text' id='new-email'/>
                <div style="margin-top: 5px;">
                    Your email will be used to notify you of your account creation. It is only visible to administrators.
                </div>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Password</label>

            <div class="controls">
                <input type='password' id='new-password'/>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Repeat password</label>

            <div class="controls">
                <input type='password' id='new-password2'/>
            </div>
        </div>
        <div class="control-group controls">
            <input class="btn" type="submit" id='new-user-submit' value="Request account"/>
        </div>
    </form>
</script>
<script type='text/javascript' src='js/jquery-2.0.1.js'></script>
<script type='text/javascript' src='js/handlebars-1.0.0-rc.4.js'></script>
<script type='text/javascript' src='js/ember-1.0.0-rc.6.js'></script>
<script type='text/javascript' src='js/ember-data-latest.js'></script>
<script type='text/javascript' src='js/bootstrap.js'></script>
<script type='text/javascript' src='js/moment.js'></script>
<script type='text/javascript' src='js/livestamp.js'></script>
<script type='text/javascript' src='js/ember.js'></script>

</body>
</html>