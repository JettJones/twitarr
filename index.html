<!DOCTYPE html>
<html>
<head>
    <title>Twit-arr!</title>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <link rel='stylesheet' type='text/css' href='css/bootstrap.css'/>
    <link rel='stylesheet' type='text/css' href='css/bootstrap-responsive.css'/>
    <link rel='stylesheet' type='text/css' href='css/main.css'/>
    <script type='text/javascript' src='js/jquery-2.0.1.js'></script>
    <script type='text/javascript' src='js/knockout-2.2.1.js'></script>
    <script type='text/javascript' src='js/bootstrap.js'></script>
    <script type='text/javascript' src='js/moment.js'></script>
    <script type='text/javascript' src='js/livestamp.js'></script>
    <script type='text/javascript' src='js/main.js'></script>
</head>
<body>
<div class='navbar'>
    <div class='navbar-inner'>
        <a class='brand'>Twit-arr!</a>
        <ul class='nav'>
            <li data-bind="css: { active: announcements_screen() }">
                <a href='#' data-bind="click: set_panel" data-section='announcements'>Announcements</a>
            </li>
            <li data-bind="css: { active: popular_screen() }">
                <a href='#' data-bind="click: set_panel" data-section='popular'>Popular</a>
            </li>
            <li data-bind="css: { active: all_screen() }">
                <a href='#' data-bind="click: set_panel" data-section='all'>All</a>
            </li>
            <li data-bind="visible: logged_in, css: { active: my_stuff_screen() }">
                <a href='#' data-bind="click: set_panel" data-section='my-stuff'>My Stuff</a>
            </li>
        </ul>
        <ul class='nav pull-right'>
            <li data-bind="visible: !logged_in(), css: { active: login_screen() }">
                <a href='#' data-bind="click: set_panel" data-section='login'>Login</a>
            </li>
            <li data-bind="visible: logged_in" class='dropdown'>
                <a href='#' class='dropdown-toggle' data-toggle='dropdown'>
                    <span data-bind='text: user.username'></span>
                    <b class='caret'></b>
                </a>
                <ul class='dropdown-menu'>
                    <li><a tabindex='-1' href='#' data-bind="click: set_panel" data-section='profile'>Profile</a></li>
                    <li><a tabindex='-1' href='#' data-bind="click: logout">Logout</a></li>
                </ul>
            </li>
        </ul>
    </div>
</div>
<div class='main container'>
    <div data-bind="visible: announcements_screen">
        <h2>Announcements</h2>

        <div data-bind="visible: user.is_admin" style="margin-bottom: 10px;">
            <button type="button" class="btn" data-toggle="collapse" data-target="#announcement-post"
                    style="margin-bottom: 10px;">
                Make an announcement
            </button>

            <div id="announcement-post" class="collapse">
                <textarea id='post-announcement-text'></textarea>
                <button id='post-announcement-submit'>Post it</button>
            </div>
        </div>

        <div data-bind="foreach: announcements">
            <div class='post-entry'>
                <span data-bind="text: username" style="color: darkgray;"></span>
                <span data-bind="attr: { 'data-livestamp': post_time }" class="pull-right" style="color: darkgray;"></span>
                <div data-bind="text: message" style="font-size: larger; font-weight: bold;"></div>
            </div>
        </div>
    </div>

    <div data-bind="visible: popular_screen">
        <h2>Popular</h2>
    </div>

    <div data-bind="visible: all_screen">
        <h2>All</h2>

        <div data-bind="visible: logged_in" style="margin-bottom: 10px;">
            <button type="button" class="btn" data-toggle="collapse" data-target="#twit-post"
                    style="margin-bottom: 10px;">
                Make a post
            </button>

            <div id="twit-post" class="collapse">
                <textarea id='post-text'></textarea>
                <button id='post-submit'>Post it</button>
            </div>
        </div>

        <div data-bind="foreach: posts">
            <div class='post-entry'>
                <span data-bind="text: username" style="color: darkgray;"></span>
                <span data-bind="attr: { 'data-livestamp': post_time }" class="pull-right" style="color: darkgray;"></span>
                <div data-bind="text: message" style="font-size: larger; font-weight: bold;"></div>
            </div>
        </div>
    </div>

    <div data-bind="visible: my_stuff_screen">
        <h2>My Stuff</h2>
    </div>

    <div data-bind="visible: profile_screen">
        <h3>Profile</h3>
    </div>

    <div data-bind="visible: login_screen">
        <legend>Login</legend>
        <label>Username</label>
        <input type='text' id='login-username'/>
        <label>Password</label>
        <input type='password' id='login-password'/>
        <button id='login-submit'>Login</button>
    </div>
</div>
</body>
</html>